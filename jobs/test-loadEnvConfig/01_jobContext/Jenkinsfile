#!/usr/bin/groovy

@Library('jenkins-common-lib') _

stage('test-loadEnvConfig')
{
    node('master') { timestamps
    {
        def config = ['path':'/opt/app/conf', 'file':'config.yml']
        def env = readYaml(
            file: config['path'] + "/" + config['file']
        )

        echo "config.someProp ＝ ${config.someProp}"
        echo "config.someCategory.prop ＝ ${config.someCategory.prop}"
        echo "config.someCategory.arrayProp[0] ＝ ${config.someCategory.arrayProp[0]}"
        echo "config.someCategory.arrayProp[1] ＝ ${config.someCategory.arrayProp[1]}"
        echo "config.someCategory.arrayProp[2] ＝ ${config.someCategory.arrayProp[2]}"
    }}
}
